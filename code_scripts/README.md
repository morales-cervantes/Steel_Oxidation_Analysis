# Code Scripts for Oxide Layer Segmentation

This directory contains all the Python scripts developed and used for the **Oxide Layer Segmentation** project. These scripts are designed to process, analyze, and evaluate thermographic images captured during the oxidation experiments of 1045 steel specimens. Additionally, a script for expert evaluation of the algorithm's accuracy has been provided. Each script serves a specific role in the overall workflow, as described below.

## Contents

1. **`main.py`**: The central script that integrates all the steps in the workflow, from loading data to producing final analysis results.
2. **`limites_probeta.py`**: Script for identifying the boundaries of the regions of interest (ROIs) within the thermographic images.
3. **`segment_colors.py`**: Script for background removal and segmentation of the area of interest in the thermographic images.
4. **`oxidation.py`**: Script for analyzing the oxidation process by detecting areas of non-uniform oxide growth.
5. **`metricasdelmain_correrenvezdelmain.py`**: Script for allowing an expert to evaluate the algorithmâ€™s accuracy by comparing it against manual selection of regions of interest.

## How to Use

### 1. Run the Main Script (`main.py`)

- **Purpose**: The `main.py` script coordinates the entire workflow. It calls other scripts in sequence to process thermographic images, perform segmentation, and analyze the results.
- **Usage**:
  1. Ensure all necessary dependencies are installed (`numpy`, `pandas`, `matplotlib`, `opencv-python`, `flirimageextractor`, `skimage`).
  2. Place your thermographic image files in the correct directory.
  3. Run the script using Python:
     ```bash
     python main.py
     ```
  4. The script will process the images, detect ROIs, segment the oxide layers, and calculate metrics such as precision, recall, F1-Score, and Dice Coefficient.

### 2. Determine the Boundaries (`limites_probeta.py`)

- **Purpose**: This script is responsible for detecting the upper, lower, left, and right limits of the regions of interest in the thermographic images.
- **Usage**:
  1. This script is invoked by `main.py` and does not need to be run independently.
  2. It identifies the boundaries of the specimen within the thermal image, which is crucial for accurate segmentation.

### 3. Segment the Background (`segment_colors.py`)

- **Purpose**: The `segment_colors.py` script isolates the area of interest by removing the background from the thermographic images.
- **Usage**:
  1. This script is called by `main.py`.
  2. It utilizes color space transformations and masking techniques to differentiate the oxide layer from the background.

### 4. Analyze Oxidation (`oxidation.py`)

- **Purpose**: This script detects and analyzes the growth of oxide layers on the steel specimen by evaluating the temperature gradients and differences in the segmented areas.
- **Usage**:
  1. This script is also called by `main.py`.
  2. It outputs key metrics related to the oxidation process, helping to assess the uniformity and extent of oxidation.

### 5. Expert Evaluation of the Algorithm (`metricasdelmain_correrenvezdelmain.py`)

- **Purpose**: This script allows an expert to manually select regions of interest and areas of oxidation in the thermographic images. It compares these manual selections to the results generated by the algorithm to evaluate the accuracy and performance of the algorithm.
- **Usage**:
  1. Run the script using Python:
     ```bash
     python metricasdelmain_correrenvezdelmain.py
     ```
  2. The script will prompt the expert to select areas manually using the mouse. The metrics will be calculated and compared against the algorithm's automatic selections.
  3. Results, including precision, recall, F1-Score, Dice Coefficient, and others, are saved in an Excel file (`metricas_evaluacion.xlsx`) for further analysis.

## Dependencies

Ensure the following Python libraries are installed:

```bash
pip install numpy pandas matplotlib opencv-python flirimageextractor skimage

## Example Image: `t8.tiff`

An example thermographic image, `t8.tiff`, is included in this directory to allow users to quickly test and run the scripts provided.

### How to Use the Example Image

1. **Ensure Dependencies are Installed**: As outlined in the [Dependencies](#dependencies) section, make sure all necessary Python libraries are installed.
2. **Run the Main Script**: 
   - Use the example image `t8.tiff` to test the entire workflow:
     ```bash
     python main.py
     ```
   - The script will process the image, detect regions of interest, segment the oxide layers, and calculate key metrics.
3. **Run the Evaluation Script**:
   - To evaluate the algorithm's accuracy using manual selection:
     ```bash
     python metricasdelmain_correrenvezdelmain.py
     ```
   - The script will prompt you to manually select regions on `t8.tiff`, compare the selections with the automatic segmentation, and output the results.

### Purpose of the Example Image

The provided `t8.tiff` image allows users to:
- Test the functionality of the provided scripts.
- Understand the expected output and workflow.
- Quickly get started with the project without needing to source their own thermographic data.

---

This example image is integral to ensuring that users can seamlessly run and understand the project, even if they do not have access to their own thermographic images.


